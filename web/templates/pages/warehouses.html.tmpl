{{if not .PageData.OnlyRenderPage}}
{{template "layouts/app" .}}
{{end}}

{{define "page-content"}}
<main id="page-content" class="flex flex-col items-center justify-center text-white px-2 py-4">
  <h1 class="text-2xl mr-auto pl-2">Warehouses</h1>
  <div class="flex flex-col px-3 mt-3" data-signals="{createFormOpen: false}">
    <button data-show="!$createFormOpen" data-on-click="$createFormOpen = true" class="mt-3 bg-neutral-800 py-1 px-3 rounded">Create Warehouse</button>
    <div data-show="$createFormOpen" class="flex flex-col gap-2">
      <input data-bind-form.addr type="text" placeholder="address... (optional)" class="pl-1 border border-neutral-500">
      <div class="grid grid-cols-2 gap-6">
        <label class="flex flex-col">
          <span>North coord</span>
          <input data-bind-form.ncoord type="number" class="pl-1 border border-neutral-500 w-20">
        </label>
        <label class="flex flex-col">
          <span>East coord</span>
          <input data-bind-form.ecoord type="number" class="pl-1 border border-neutral-500 w-20">
        </label>
      </div>
      <button data-on-click="@post('/app/warehouses')" class="bg-neutral-800 rounded py-1 px-3">Create</button>
      <p id="error-msg" class="text-red-500 text-sm"></p>
      <button class="underline text-neutral-400" data-on-click="$createFormOpen = false">cancel</button>
    </div>
  </div>
  <div class="flex flex-col gap-2 w-full mt-6">
    {{range .Warehouses}}
    <div class="flex p-1 w-full bg-neutral-800 rounded">
      <div class="flex flex-col mr-auto">
        <p class="text-xl">{{.Addr}}</p>
        <p class="text-sm text-neutral-400 leading-tight">{{.Location}}</p>
      </div>
      <a href="/app/warehouses/{{.Addr}}" class="bg-white text-black px-2 underline content-center">Select</a>
    </div>
    {{end}}
  </div>
</main>
{{end}}

{{if .PageData.OnlyRenderPage}}
  {{template "page-content" .PageData}}
{{end}}